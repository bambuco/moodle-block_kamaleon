define("block_kamaleon/main",["exports","jquery","block_kamaleon/horizontalslider","core/log","core/modal","core/modal_events"],function(_exports,_jquery,_horizontalslider,_log,_modal,_modal_events){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}
/**
   * General features.
   *
   * @module    block_kamaleon/main
   * @copyright 2024 David Herney @ BambuCo
   * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.initSlider=_exports.initOpenInModal=void 0,_jquery=_interopRequireDefault(_jquery),_horizontalslider=_interopRequireDefault(_horizontalslider),_log=_interopRequireDefault(_log),_modal=_interopRequireDefault(_modal),_modal_events=_interopRequireDefault(_modal_events);_exports.initSlider=()=>{(0,_jquery.default)(".kam-hslider").each(function(){var $this=(0,_jquery.default)(this),prop={animation:"slide",itemMargin:15,selector:"section > *"};if($this.attr("data-autoplay")&&"true"==$this.attr("data-autoplay")?prop.slideshow=!0:prop.slideshow=!1,$this.attr("data-loop")&&"true"==$this.attr("data-loop")&&(prop.animationLoop=!0),$this.attr("data-width"))prop.itemWidth=parseInt($this.attr("data-width"));else{var $element=$this.find(prop.selector),itemwidth=$element.css("width");prop.itemWidth=itemwidth?parseInt(itemwidth):$element.width()}_horizontalslider.default.init($this,prop)})};_exports.initOpenInModal=()=>{(0,_jquery.default)(".kam-openinmodal").each(function(){var $this=(0,_jquery.default)(this);$this.on("click",function(event){event.preventDefault();const $link=(0,_jquery.default)(this),dialogue=$link.data("dialogue");if(dialogue)dialogue.show();else{var w=$this.attr("data-property-width"),h=$this.attr("data-property-height"),href=$link.attr("href"),url=href+(-1===href.indexOf("?")?"?":"&")+"inpopup=true",$iframe=(0,_jquery.default)('<iframe class="bbco-openinmodal-container"></iframe>');$iframe.attr("src",url),$iframe.on("load",function(){$iframe.contents().find("a:not([target])").attr("target","_top")});var el=_jquery.default.fn.hide;_jquery.default.fn.hide=function(){return this.trigger("hide"),el.apply(this,arguments)},(0,_jquery.default)("<div></div>").append($iframe);var properties={width:"95vw",height:"95vh"};if(w){if(w.indexOf("%")>=0){var windowW=(0,_jquery.default)(window).width(),tmpW=Number(w.replace("%",""));!isNaN(tmpW)&&tmpW>0&&(w=tmpW*windowW/100)}isNaN(w)||(w+="px"),properties.width=w}if(h){if(h.indexOf("%")>=0){var windowH=(0,_jquery.default)(window).height(),tmpH=Number(h.replace("%",""));!isNaN(tmpH)&&tmpH>0&&(h=tmpH*windowH/100)}isNaN(h)||(h+="px"),properties.height=h}_modal.default.create({body:$iframe,title:$link.attr("title")||$link.text()}).then(function(modal){return modal.getRoot().on(_modal_events.default.hidden,function(){$iframe.contents().find("video, audio").each(function(){this.pause()})}),modal.getRoot().find("> .modal-dialog").attr("style","width: "+properties.width+"; height: "+properties.height+";").addClass("bbco-modal-dialog"),modal.show(),$link.data("dialogue",modal),modal}).catch(function(e){_log.default.debug("Error creating modal"),_log.default.debug(e)})}})})}});

//# sourceMappingURL=main.min.js.map